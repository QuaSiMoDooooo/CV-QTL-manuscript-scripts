# RNA-seq Snakemake Pipeline

## Introduction

This is a Snakemake pipeline for RNA-seq data analysis. Starting from raw paired-end sequencing files, it can identify alternative polyadenylation, alternative splicing, gene expression quantification, and reference genome alignment. Finally, it uses MultiQC to generate a visualization report.

## Usage

### Prepare SnakeMake Environment

Multiple methods are supported, but conda installation is most recommended:

```bash
conda install -c bioconda snakemake singularity
```

### Understand Directory Structure

The file directory structure is as follows:

```plaintext
pipeline
├── benchmarks: Pipeline performance statistics, including total runtime, memory usage, I/O, CPU time and other metrics
├── configs: Configuration files for each step of the pipeline, this pipeline requires 4 configuration files, details in the "Configuration" section below
├── logs: Pipeline log files folder, including runtime logs, error logs, etc.
├── profiles: Pipeline runtime parameters, specifying some parameters during runtime
├── resources: Static files required for pipeline execution, such as reference genome, these files are not generated by the pipeline
├── results: Pipeline results folder
└── workflow: Pipeline definition folder, including the logic of each step
    ├── envs: Conda environments required by the pipeline are specified here, the pipeline will automatically install the corresponding environments
    ├── modules: Functional modules for genome processing, collections of related steps
    ├── rules: Various rules are defined here, defining specific rules for all modules
    ├── scripts: Auxiliary scripts needed for the overall pipeline, such as queue processing scripts
    └── Snakefile: Entry file of the pipeline, defining the overall logic of the pipeline
```

Among these, the directories that users should modify are `configs` and `resources`, while other directories are not recommended to be modified casually.

### Modify Configuration Files

There are 4 configuration files in the `configs` directory:

- `cohort.yaml`: Cohort configuration file for pipeline processing, including sample names, sample paths, etc.
- `config.yaml`: Global configuration file for each step of the pipeline
- `dependency.yaml`: Dependency relationships between various modules, used for automatic completion of pipeline modules
- `reference.yaml`: Static data configuration file, including reference genome, reference genome annotation, etc.

### Prepare Static Data

Place the static data required for pipeline execution in the `resources` directory, such as reference genome, reference genome annotation, etc., and specify relative paths in `reference.yaml`. Note that when the pipeline runs, the directory is the root directory of the pipeline, so the path should start with `resources/**`.

### Additional Preparation

In this pipeline, the QAPA module for identifying APA uses a local conda environment named "qapa", which needs to be installed by the user. Please refer to [QAPA's official GitHub](https://github.com/morrislab/qapa) for installation methods.

        